"use strict";(()=>{var e={};e.id=3002,e.ids=[3002],e.modules={67096:e=>{e.exports=require("bcrypt")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90417:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>b,originalPathname:()=>v,patchFetch:()=>y,requestAsyncStorage:()=>p,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>w});var i={};r.r(i),r.d(i,{POST:()=>d});var a=r(95419),o=r(69108),s=r(99678),n=r(78070),l=r(67096),c=r(9108),u=r(5149);async function d(e){try{let{name:t,email:r,password:i}=await e.json();if(!t||!r||!i)return n.Z.json({error:"Tous les champs sont requis"},{status:400});if(await c.Z.user.findUnique({where:{email:r}}))return n.Z.json({error:"Cet email est d\xe9j\xe0 utilis\xe9"},{status:400});let a=await (0,l.hash)(i,12),o=await c.Z.user.create({data:{name:t,email:r,password:a}});await (0,u.Pi)({to_email:r,to_name:t});let{password:s,...d}=o;return n.Z.json({message:"Inscription r\xe9ussie",user:d},{status:201})}catch(e){return console.error("Erreur lors de l'inscription:",e),n.Z.json({error:"Erreur lors de l'inscription"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/home/runner/work/ExpertsPronostics/ExpertsPronostics/app/api/auth/register/route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:b,staticGenerationBailout:w}=m,v="/api/auth/register/route";function y(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},5149:(e,t,r)=>{r.d(t,{LS:()=>j,Pi:()=>E});class i{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}let a={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},o=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},s=async(e,t,r={})=>{let o=await fetch(a.origin+e,{method:"POST",headers:r,body:t}),s=await o.text(),n=new i(o.status,s);if(o.ok)return n;throw n},n=(e,t,r)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||"string"!=typeof r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},l=e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},c=e=>e.webdriver||!e.languages||0===e.languages.length,u=()=>new i(451,"Unavailable For Headless Browser"),d=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"},m=e=>!e.list?.length||!e.watchVariable,p=(e,t)=>e instanceof FormData?e.get(t):e[t],h=(e,t)=>{if(m(e))return!1;d(e.list,e.watchVariable);let r=p(t,e.watchVariable);return"string"==typeof r&&e.list.includes(r)},g=()=>new i(403,"Forbidden"),b=(e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"},w=async(e,t,r)=>{let i=Number(await r.get(e)||0);return t-Date.now()+i},v=async(e,t,r)=>{if(!t.throttle||!r)return!1;b(t.throttle,t.id);let i=t.id||e;return await w(i,t.throttle,r)>0||(await r.set(i,Date.now().toString()),!1)},y=()=>new i(429,"Too Many Requests"),_=e=>{if(!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},f=e=>"string"==typeof e?document.querySelector(e):e,P={init:(e,t="https://api.emailjs.com")=>{if(!e)return;let r=o(e);a.publicKey=r.publicKey,a.blockHeadless=r.blockHeadless,a.storageProvider=r.storageProvider,a.blockList=r.blockList,a.limitRate=r.limitRate,a.origin=r.origin||t},send:async(e,t,r,i)=>{let d=o(i),m=d.publicKey||a.publicKey,p=d.blockHeadless||a.blockHeadless,b=d.storageProvider||a.storageProvider,w={...a.blockList,...d.blockList},_={...a.limitRate,...d.limitRate};return p&&c(navigator)?Promise.reject(u()):(n(m,e,t),l(r),r&&h(w,r))?Promise.reject(g()):await v(location.pathname,_,b)?Promise.reject(y()):s("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:m,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})},sendForm:async(e,t,r,i)=>{let l=o(i),d=l.publicKey||a.publicKey,m=l.blockHeadless||a.blockHeadless,p=a.storageProvider||l.storageProvider,b={...a.blockList,...l.blockList},w={...a.limitRate,...l.limitRate};if(m&&c(navigator))return Promise.reject(u());let P=f(r);n(d,e,t),_(P);let E=new FormData(P);return h(b,E)?Promise.reject(g()):await v(location.pathname,w,p)?Promise.reject(y()):(E.append("lib_version","4.4.1"),E.append("service_id",e),E.append("template_id",t),E.append("user_id",d),s("/api/v1.0/email/send-form",E))},EmailJSResponseStatus:i};P.init(process.env.NEXT_PUBLIC_EMAILJS_USER_ID);let E=async e=>{try{await P.send(process.env.NEXT_PUBLIC_EMAILJS_SERVICE_ID,process.env.NEXT_PUBLIC_EMAILJS_WELCOME_TEMPLATE_ID,{to_email:e.to_email,to_name:e.to_name}),console.log("Email de bienvenue envoy\xe9 avec succ\xe8s")}catch(e){throw console.error("Erreur lors de l'envoi de l'email de bienvenue:",e),e}},j=async e=>{try{await P.send(process.env.NEXT_PUBLIC_EMAILJS_SERVICE_ID,process.env.NEXT_PUBLIC_EMAILJS_RESET_TEMPLATE_ID,{to_email:e.to_email,to_name:e.to_name,reset_link:e.reset_link}),console.log("Email de r\xe9initialisation envoy\xe9 avec succ\xe8s")}catch(e){throw console.error("Erreur lors de l'envoi de l'email de r\xe9initialisation:",e),e}}},9108:(e,t,r)=>{r.d(t,{Z:()=>a});let i=require("@prisma/client"),a=global.prisma||new i.PrismaClient({log:["query"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[1638,6206],()=>r(90417));module.exports=i})();