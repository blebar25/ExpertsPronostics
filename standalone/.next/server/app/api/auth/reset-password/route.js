"use strict";(()=>{var e={};e.id=9436,e.ids=[9436],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},97536:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>_,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>u,serverHooks:()=>b,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>v});var i={};r.r(i),r.d(i,{POST:()=>m});var a=r(95419),o=r(69108),s=r(99678),n=r(78070),l=r(9108),c=r(6113),d=r.n(c),p=r(5149);async function m(e){try{let{email:t}=await e.json(),r=d().randomBytes(32).toString("hex"),i=new Date(Date.now()+36e5),a=await l.Z.user.update({where:{email:t},data:{resetToken:r,resetTokenExpiry:i}});return a&&await (0,p.LS)({to_email:t,to_name:a.name,reset_link:`${process.env.NEXT_PUBLIC_BASE_URL}/reset-password/${r}`}),n.Z.json({message:"Si un compte existe avec cet email, vous recevrez un lien de r\xe9initialisation."})}catch(e){return console.error("Erreur lors de la r\xe9initialisation du mot de passe:",e),n.Z.json({error:"Une erreur est survenue"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/reset-password/route",pathname:"/api/auth/reset-password",filename:"route",bundlePath:"app/api/auth/reset-password/route"},resolvedPagePath:"/home/runner/work/ExpertsPronostics/ExpertsPronostics/app/api/auth/reset-password/route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:h,staticGenerationAsyncStorage:w,serverHooks:b,headerHooks:g,staticGenerationBailout:v}=u,_="/api/auth/reset-password/route";function y(){return(0,s.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:w})}},5149:(e,t,r)=>{r.d(t,{LS:()=>S,Pi:()=>E});class i{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}let a={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},o=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},s=async(e,t,r={})=>{let o=await fetch(a.origin+e,{method:"POST",headers:r,body:t}),s=await o.text(),n=new i(o.status,s);if(o.ok)return n;throw n},n=(e,t,r)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||"string"!=typeof r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},l=e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},c=e=>e.webdriver||!e.languages||0===e.languages.length,d=()=>new i(451,"Unavailable For Headless Browser"),p=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"},m=e=>!e.list?.length||!e.watchVariable,u=(e,t)=>e instanceof FormData?e.get(t):e[t],h=(e,t)=>{if(m(e))return!1;p(e.list,e.watchVariable);let r=u(t,e.watchVariable);return"string"==typeof r&&e.list.includes(r)},w=()=>new i(403,"Forbidden"),b=(e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"},g=async(e,t,r)=>{let i=Number(await r.get(e)||0);return t-Date.now()+i},v=async(e,t,r)=>{if(!t.throttle||!r)return!1;b(t.throttle,t.id);let i=t.id||e;return await g(i,t.throttle,r)>0||(await r.set(i,Date.now().toString()),!1)},_=()=>new i(429,"Too Many Requests"),y=e=>{if(!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},f=e=>"string"==typeof e?document.querySelector(e):e,P={init:(e,t="https://api.emailjs.com")=>{if(!e)return;let r=o(e);a.publicKey=r.publicKey,a.blockHeadless=r.blockHeadless,a.storageProvider=r.storageProvider,a.blockList=r.blockList,a.limitRate=r.limitRate,a.origin=r.origin||t},send:async(e,t,r,i)=>{let p=o(i),m=p.publicKey||a.publicKey,u=p.blockHeadless||a.blockHeadless,b=p.storageProvider||a.storageProvider,g={...a.blockList,...p.blockList},y={...a.limitRate,...p.limitRate};return u&&c(navigator)?Promise.reject(d()):(n(m,e,t),l(r),r&&h(g,r))?Promise.reject(w()):await v(location.pathname,y,b)?Promise.reject(_()):s("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:m,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})},sendForm:async(e,t,r,i)=>{let l=o(i),p=l.publicKey||a.publicKey,m=l.blockHeadless||a.blockHeadless,u=a.storageProvider||l.storageProvider,b={...a.blockList,...l.blockList},g={...a.limitRate,...l.limitRate};if(m&&c(navigator))return Promise.reject(d());let P=f(r);n(p,e,t),y(P);let E=new FormData(P);return h(b,E)?Promise.reject(w()):await v(location.pathname,g,u)?Promise.reject(_()):(E.append("lib_version","4.4.1"),E.append("service_id",e),E.append("template_id",t),E.append("user_id",p),s("/api/v1.0/email/send-form",E))},EmailJSResponseStatus:i};P.init(process.env.NEXT_PUBLIC_EMAILJS_USER_ID);let E=async e=>{try{await P.send(process.env.NEXT_PUBLIC_EMAILJS_SERVICE_ID,process.env.NEXT_PUBLIC_EMAILJS_WELCOME_TEMPLATE_ID,{to_email:e.to_email,to_name:e.to_name}),console.log("Email de bienvenue envoy\xe9 avec succ\xe8s")}catch(e){throw console.error("Erreur lors de l'envoi de l'email de bienvenue:",e),e}},S=async e=>{try{await P.send(process.env.NEXT_PUBLIC_EMAILJS_SERVICE_ID,process.env.NEXT_PUBLIC_EMAILJS_RESET_TEMPLATE_ID,{to_email:e.to_email,to_name:e.to_name,reset_link:e.reset_link}),console.log("Email de r\xe9initialisation envoy\xe9 avec succ\xe8s")}catch(e){throw console.error("Erreur lors de l'envoi de l'email de r\xe9initialisation:",e),e}}},9108:(e,t,r)=>{r.d(t,{Z:()=>a});let i=require("@prisma/client"),a=global.prisma||new i.PrismaClient({log:["query"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[1638,6206],()=>r(97536));module.exports=i})();